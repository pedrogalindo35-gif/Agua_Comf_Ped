[{
  "_id": {
    "$oid": "69150b77f267ef49570b9575"
  },
  "fecha_reporte": "2025/10/28",
  "fuente_agua": "acometida municipal",
  "estado_fuente": "Operativa",
  "calidad_agua": "No apta para consumo",
  "frecuencia_acceso": "Cada 15 días",
  "cantidad_promedio_litros": 50,
  "observaciones": "No llega agua",
  "reportado_por": "Consejal",
  "barrio": "El carmen",
  "Municipio": "Albania"
}]


[
  {
    $match:
      // en esta parte del codigo se
//envia una instruccion para que me muestre
//todos los datos referentes a Riohacha
{
  Municipio: "Riohacha"
}
//Hemos realizado varios filtros para
//poder analizar de manera más detallada
//los datos recolectados acerca de la
//recolección de agua para consumo.
//se ha evidenciado que el municipio de albania
//es uno de los mas afectados por lo
//que necsita mayor prioridad para la
//entrega de agua
  },
  {
    $group:
      //una vez obtenido los datos de 
//Riohacha, se envía para
//sacar el promedio de litros de
//agua recolectado por barrio
{
  _id: "$barrio",
  promedioAguaRecolectada: {
    $avg: "$cantidad_promedio_litros"
  }
}
//como resultado, nos envía los promedios de litros de agua que recolecta cada barrio
[{
  "_id": "Villa fatima",
  "promedioAguaRecolectada": 10
},
{
  "_id": "Cooperativo",
  "promedioAguaRecolectada": 100
},
{
  "_id": "Dividivi",
  "promedioAguaRecolectada": 1000
},
{
  "_id": "Entre Ríos",
  "promedioAguaRecolectada": 100
},
{
  "_id": "Las tunas",
  "promedioAguaRecolectada": 500
}]

[
  {
    $group:
      //Esta instruccion es para sumar
      //los litros de agua recolectado en
      //todos los municipios.
      //Lo primero que hacemos es crear
      //una variable (total_litros) para pedir
      //los litros de agua recolectados
      //por cada municipio
      {
        _id: "$Municipio",
        total_litros: {
          $sum: "$cantidad_promedio_litros"
        }
      }
  },
  {
    $sort:
      //Una vez obtenidos los datos,
      //muestra el total de los litros
      //de agua se recolectada se ordenan
      //de mayor a menor.
      {
        total_litros: -1
      }
  },
  {
    $limit:
      //Por ultimo escogemos stage limit
      //para que nos muestre el total de la suma
      1
  }
]

  //como resultado tenemos:
  [{
  "_id": null,
  "total_litros": 10400
}]
  
[
  {
    $match:
      //Esta instruccion es para ver
      //la frecuencia con que se recolecta
      //el agua cada 7 días.
      //primero llamamos la variable
      //frecuencia_acceso para que
      //nos muestre los datos
      {
        frecuencia_acceso: "Cada 7 días"
      }
  },
  {
    $group:
      //Una vez obtenidos los datos,
      //llamamos a la función contar
      //para que nos indique con que
      //frecuencia recolectan el agua
      //en cada municipio
      {
        _id: "$Municipio",
        count: {
          $sum: 1
        }
      }
  }
]
  // como resultado nos muestra la cantidad de agua recolectada por municipio
  [{
  "_id": null,
  "count": 1
},
{
  "_id": "Hatonuevo",
  "count": 20
},
{
  "_id": "Riohacha",
  "count": 4
},
{
  "_id": "Maicao",
  "count": 1
}]

  
